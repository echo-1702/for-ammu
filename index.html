<!doctype html>
<html lang="ta">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>роЕроорпНроорпБ тАФ роОройрпН роЙро│рпНро│родрпНродро┐ро▓рпН (Valentine Special)</title>
  <meta name="description" content="ро╡ро╛ро▓рпЖрогрпНроЯрпИройрпН ро╕рпНрокрпЖро╖ро▓рпН тАФ роХро╛родро▓рпН рокроХрпНроХроорпН (родрооро┐ро┤ро┐ро▓рпН) тАФ ро╕рпНро▓рпИроЯрпБроХро│рпН, родро┐ро░рпБрокрпНрокрпБ, рооро┤рпИ рооро▒рпНро▒рпБроорпН роЗродроп роЗроЯрпИро╡рпЖро│ро┐." />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+Tamil:wght@400;700&family=Noto+Sans+Tamil:wght@300;400;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --max-w:760px;
      --bg-1:#fff6f9;
      --bg-2:#fff0f4;
      --accent-red:#ff204a;
      --accent-pink:#ff6aa6;
      --muted:#6f5966;
      --card-shadow: 0 20px 70px rgba(120,30,50,0.12);
      --soft-shadow: 0 12px 36px rgba(120,30,50,0.08);
      --radius:18px;
      --heart-size:28px;
      --particle-density:1;
    }

    html,body{
      height:100%;
      margin:0;
      font-family:"Noto Serif Tamil","Noto Sans Tamil", serif;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      background:
        radial-gradient(900px 420px at 8% 10%, rgba(255,200,220,0.09), transparent 12%),
        linear-gradient(180deg,var(--bg-1),var(--bg-2));
      color:#351427;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
      font-variant: all-small-caps;
      -webkit-text-size-adjust:100%;
    }

    .wrap{
      max-width:var(--max-w);
      margin:0 auto;
      padding:18px 14px 110px;
      min-height:100vh;
      position:relative;
      text-align:center;
      overflow-x:hidden;
    }

    header{ display:flex; gap:12px; align-items:center; justify-content:center; margin-bottom:8px; flex-direction:column; }
    .brand{ display:flex; gap:12px; align-items:center; justify-content:center; }
    .title{ font-family:"Noto Serif Tamil", serif; font-size:20px; margin:0; color:#2b1024; line-height:1; cursor:pointer; text-align:center; }
    .subtitle{ margin:6px 0 0; font-size:13px; color:var(--muted); text-align:center; }

    .valentine-banner{ margin-top:10px; display:flex; gap:12px; align-items:center; justify-content:center; }
    .v-pill{ background: linear-gradient(90deg, var(--accent-red), var(--accent-pink)); color:white; padding:8px 12px; border-radius:999px; font-weight:700; font-size:13px; box-shadow: 0 12px 36px rgba(255,32,74,0.14); text-align:center; }

    .parallax-layer{ position:fixed; pointer-events:none; z-index:0; inset:0; }
    .parallax-blob{ position:absolute; border-radius:50%; filter: blur(18px); opacity:0.9; mix-blend-mode:screen; }

    .card{ margin-top:16px; padding:16px; border-radius:var(--radius); background: linear-gradient(180deg, rgba(255,255,255,0.76), rgba(255,250,254,0.98)); box-shadow: var(--card-shadow); border: 1px solid rgba(255,255,255,0.68); backdrop-filter: blur(8px) saturate(120%); -webkit-backdrop-filter: blur(8px) saturate(120%); text-align:center; position:relative; z-index:1; }

    .hero{ display:flex; gap:12px; align-items:center; padding:12px; border-radius:14px; background: linear-gradient(90deg, rgba(255,235,245,0.6), rgba(255,245,250,0.78)); box-shadow: var(--soft-shadow); position:relative; overflow:visible; flex-direction:column; justify-content:center; }
    .greeting{ font-family:"Noto Serif Tamil", serif; font-size:20px; margin:8px 0 6px; color:#331427; text-align:center; }
    .lead{ font-size:14px; color:var(--muted); margin:8px 0 0; text-align:center; max-width:86%; margin-left:auto; margin-right:auto; }

    .section-title{ font-size:12px; color:var(--muted); text-transform:uppercase; letter-spacing:1.2px; margin:0 0 10px; text-align:center; }
    .poem{ font-family:"Noto Serif Tamil", serif; font-size:16px; color:#3a2133; line-height:1.6; text-align:center; }

    /* reveal */
    .reveal{ opacity:0; transform: translateY(26px) translateZ(-20px) scale(0.98); transition: transform 720ms cubic-bezier(.2,.9,.25,1), opacity 720ms cubic-bezier(.2,.9,.25,1); will-change: transform, opacity; perspective:900px; }
    .reveal.visible{ opacity:1; transform: translateY(0) translateZ(0) scale(1); }

    .blocks{ display:grid; grid-template-columns: repeat(3, 1fr); gap:12px; margin-top:8px; justify-items:center; }
    .flip-card{ width:100%; min-height:108px; perspective:900px; }
    .flip-inner{ position:relative; width:100%; min-height:108px; transform-style:preserve-3d; transition: transform 520ms cubic-bezier(.2,.9,.2,1); border-radius:14px; display:flex; align-items:center; justify-content:center; }
    .flip-card.flipped .flip-inner{ transform: rotateY(180deg); }
    .face{ position:absolute; inset:0; backface-visibility:hidden; border-radius:12px; padding:14px; display:flex; align-items:center; justify-content:center; flex-direction:column; box-shadow: 0 14px 36px rgba(90,30,50,0.06); background: linear-gradient(180deg,#fff7fb,#fff1f6); }
    .face.back{ transform: rotateY(180deg); background: linear-gradient(180deg,#fff,#fff8fb); color:#341427; }

    .face .title-card{ font-size:14px; margin-bottom:6px; font-weight:700; }
    .face .desc{ color:var(--muted); font-size:13px; }

    .dragging{ transform: scale(1.02) rotate(0.6deg); box-shadow: 0 34px 90px rgba(120,30,50,0.12); z-index:60; }

    .gift-wrapper{ display:flex; justify-content:center; align-items:center; margin-top:8px; }
    .gift{ min-width:100px; height:100px; border-radius:16px; padding:12px; display:flex; flex-direction:column; align-items:center; justify-content:center; background: linear-gradient(180deg,#fff5f8,#ffeef6); box-shadow: 0 16px 44px rgba(120,30,50,0.08); cursor:pointer; border:1px solid rgba(255,255,255,0.7); transition: transform 320ms cubic-bezier(.2,.9,.2,1), box-shadow 320ms; }
    .gift:active{ transform: translateY(-8px) scale(1.02); box-shadow: 0 28px 70px rgba(120,30,50,0.12); }

    .image-modal{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:360; background: rgba(20,8,20,0.6); padding:22px; backdrop-filter: blur(6px); }
    .image-modal.open{ display:flex; }
    .image-card{ width:100%; max-width:760px; border-radius:14px; overflow:hidden; transform-origin:center; animation: imageIn 420ms cubic-bezier(.2,.9,.2,1); background:#fff; }
    .image-card img{ width:100%; height:auto; display:block; }
    .image-card .caption{ padding:12px; text-align:center; font-family:"Noto Serif Tamil", serif; color:#341427; background: linear-gradient(180deg,#fff,#fff8fb); }
    @keyframes imageIn{ from{ transform: scale(0.94) translateY(22px); opacity:0; } to{ transform: scale(1) translateY(0); opacity:1; } }
    .close-btn{ position:absolute; right:18px; top:18px; background:rgba(255,255,255,0.95); border-radius:10px; padding:8px; border:none; cursor:pointer; box-shadow:0 8px 20px rgba(0,0,0,0.08); }

    .book{ margin-top:16px; display:flex; align-items:center; justify-content:center; gap:12px; flex-direction:column; }
    .book-view{ width:100%; max-width:560px; height:300px; perspective:1400px; position:relative; }
    .page{ width:100%; height:100%; position:absolute; left:0; top:0; transform-origin:left center; transition: transform 720ms cubic-bezier(.2,.9,.25,1), opacity 420ms ease; border-radius:12px; overflow:hidden; box-shadow: 0 30px 80px rgba(35,10,30,0.18); background:linear-gradient(180deg,#fff8fb,#fff4f6); display:flex; align-items:center; justify-content:center; flex-direction:column; text-align:center; padding:18px; }
    .page.hidden{ opacity:0; pointer-events:none; }

    /* Decrease visual size specifically for page 0 content (font + spacing) */
    .page[data-page="0"] { padding:14px; }
    .page[data-page="0"] h3 { font-size:18px; margin:0 0 6px; }
    .page[data-page="0"] div { font-size:14px; color:var(--muted); max-width:86%; }

    .book-controls{ display:flex; gap:10px; justify-content:center; margin-top:8px; }

    footer{ margin-top:22px; color:var(--muted); font-size:13px; text-align:center; display:flex; gap:8px; align-items:center; justify-content:center; flex-direction:row; }
    .heartbeat{ width:18px; height:18px; display:inline-grid; place-items:center; transform-origin:center; animation: footerBeat 1200ms infinite; }
    .heartbeat svg{ width:18px; height:18px; display:block; fill:var(--accent-red); }
    @keyframes footerBeat{ 0%{ transform: scale(1); } 30%{ transform: scale(1.28); } 60%{ transform: scale(1); } 100%{ transform: scale(1); } }

    @media (max-width:720px){ .blocks{ grid-template-columns: repeat(2, 1fr); } .book-view{ height:220px; } .gift{ min-width:86px; height:86px; } }
    @media print{ .modal, .image-modal, #particle-layer { display:none !important; } .card{ box-shadow:none !important; background:transparent !important; border:none !important; } }
  </style>
</head>
<body>
  <div class="parallax-layer" aria-hidden="true">
    <div class="parallax-blob" id="blobA" style="width:420px;height:420px;left:-120px;top:-120px;background:linear-gradient(90deg,#ffd6ea,#ff9fcc);"></div>
    <div class="parallax-blob" id="blobB" style="width:320px;height:320px;right:-80px;bottom:-120px;background:linear-gradient(90deg,#fff0f7,#ffd6ea);opacity:0.85;"></div>
  </div>

  <main class="wrap" id="app" aria-live="polite">
    <header>
      <div class="brand">
        <div>
          <h1 class="title" id="pageTitle" tabindex="0">роЕроорпНроорпБ тАФ роОройрпН роЙро│рпНро│родрпНродро┐ро▓рпН</h1>
          <p class="subtitle">роХро╛ро░рпНродрпНродро┐ропро┐ройрпН рооройроирпНродрпЛроЯрпБроорпН ро╡ро╛ро▓рпЖрогрпНроЯрпИройрпНро╕рпН роЪро┐ро▒рокрпНрокрпБ</p>
        </div>
      </div>
    </header>

    <div class="valentine-banner">
      <div class="v-pill" aria-hidden="true">ро╡ро╛ро▓рпЖрогрпНроЯрпИройрпН родро┐рой ро╡ро╛ро┤рпНродрпНродрпБроХро│рпН тЩе</div>
    </div>

    <section class="card reveal pop-in" data-idx="1" id="intro">
      <div class="hero">
        <p class="greeting">роОройрпН роЗройро┐роп роЕроорпНроорпБ</p>
        <p class="lead">роЗроирпНрод роЪро┐ро▒рокрпНрокрпБ рокроХрпНроХроорпН роЙройроХрпНроХро╛роХтАФроорпЖройрпНроорпИропро╛рой ро╡ро╛ро░рпНродрпНродрпИроХро│рпН, рооро┐родрооро╛рой роЗродропроЩрпНроХро│рпН, рооро▒рпНро▒рпБроорпН роТро░рпБ роЪро┐ро▒рпБ рооройроХрпНроХрогро┐рокрпНрокрпБ.</p>
      </div>
    </section>

    <section class="card reveal" data-idx="2">
      <p class="section-title">роорпБродро▓рпН роиро┐ро┤ро▓рпНроХро│рпН</p>
      <div class="poem">роорпБродро▓рпН роирпКроЯро┐ропро┐ро▓рпН роЙройрпН роЪро┐ро░ро┐рокрпНрокрпБ роОройрпН роиро╛ро│рпИ рооро╛ро▒рпНро▒ро┐ропродрпБ; роЕроирпНрод роиро┐ройрпИро╡рпЗ роОройрпНройрпИ роЗройрпНро▒рпБро╡ро░рпИ ро╡ро╛ро┤ ро╡рпИродрпНродрпБроХрпН роХрпКрогрпНроЯро┐ро░рпБроХрпНроХро┐ро▒родрпБ.</div>
    </section>

    <section class="card reveal" data-idx="3">
      <p class="section-title">роиро┐ройрпИро╡рпБроХро│рпН</p>
      <div class="poem">- роЪро┐ройрпНройроХрпН роХро╡ро┐родрпИроХро│рпН, роЪро┐ройрпНройроХрпН роХро╛рокро┐ роХро╛ро▓рпИ, роТро░рпБ роЗрогрпИроирпНрод роЪро┐ро░ро┐рокрпНрокрпБ. - рооро┤рпИ роироЯрпИропро┐ро▓рпН роиро╛роорпН рокрпЗроЪро┐родрпНрод роорпМройроХрпН роХродрпИроХро│рпН.</div>
    </section>

    <section class="card reveal" data-idx="4">
      <p class="section-title">роОройрпН роЙро▒рпБродро┐</p>
      <div class="poem">роиро╛ройрпН роЙройроХрпНроХро╛роХ роЗро░рпБроХрпНроХрпБроорпН; рокрпКро▒рпБроорпИропрпЛроЯрпБ, роЕроХрпНроХро▒рпИропрпЛроЯрпБ, роЕроорпИродро┐ропрпЛроЯрпБ.</div>
    </section>

    <section class="card reveal" data-idx="5">
      <p class="section-title">роЪро┐ро▒рпБ роорпКро┤ро┐роХро│рпН (родрпКроЯрпБ / роЗро┤рпБроХрпНроХ / роХро┐ро│ро┐роХрпН)</p>
      <div class="blocks" id="blocks">
        <div class="flip-card" data-id="1" tabindex="0">
          <div class="flip-inner">
            <div class="face front"><div class="title-card">роирпА роОройрпН роЕроорпИродро┐</div><div class="desc">роЙройрпН роУроЪрпИропро┐ро▓рпН роОройрпН рооройроорпН роЕроорпИродро┐ропрпИ роХро╛рогрпНроХро┐ро▒родрпБ.</div></div>
            <div class="face back"><div class="title-card">рокро┐ройрпНройрпНрокроХрпНроХроорпН</div><div class="desc">роирпА роОрокрпНрокрпЛродрпБроорпН роОройрпН роХро░родрпНродро┐ро▓рпН роЗро░рпБроХрпНроХро┐ро▒ро╛ропрпН.</div></div>
          </div>
        </div>

        <div class="flip-card" data-id="2" tabindex="0">
          <div class="flip-inner">
            <div class="face front"><div class="title-card">роиро▓рпНро▓ роиро┐ройрпИро╡рпБроХро│рпН</div><div class="desc">роОродро┐ро░рпНрокро╛ро░ро╛род роЪроирпНродрпЛроЪроЩрпНроХро│рпН роОрокрпНрокрпЛродрпБроорпН родройро┐родрпНродрпБро╡роорпН родро░рпБроорпН.</div></div>
            <div class="face back"><div class="title-card">рокро┐ройрпНройрпНрокроХрпНроХроорпН</div><div class="desc">роЕро╡рпИроХро│ро┐ройрпН роТро│ро┐ роОрокрпНрокрпЛродрпБроорпН роОройрпН рооройродро┐ро▓рпН.</div></div>
          </div>
        </div>

        <div class="flip-card" data-id="3" tabindex="0">
          <div class="flip-inner">
            <div class="face front"><div class="title-card">роХрпБро░ро▓ро┐ро▓рпН роХройро╡рпБ</div><div class="desc">роЙройрпН роХрпБро░ро▓ро┐ро▓рпН роОройрпН роиро╛ро│ро┐ройрпН роЗроЪрпИ роТро▓ро┐роХрпНроХро┐ро▒родрпБ.</div></div>
            <div class="face back"><div class="title-card">рокро┐ройрпНройрпНрокроХрпНроХроорпН</div><div class="desc">роТро╡рпНро╡рпКро░рпБ роЪрпБро╡ро╛роЪроорпБроорпН роЙройрпНройрпИ роиро┐ройрпИро╡ро╛роХроХрпН роХрпКрогрпНроЯрпБро│рпНро│родрпБ.</div></div>
          </div>
        </div>

        <div class="flip-card" data-id="4" tabindex="0">
          <div class="flip-inner">
            <div class="face front"><div class="title-card">роЗрогрпИродрпНродрпБроЪрпН роЪрпКро░рпБроХрпБродро▓рпН</div><div class="desc">роироорпН роЪро╛родро╛ро░рог родро░рпБрогроЩрпНроХро│рпН роЕро┤роХро╛рой роХродрпИ роЪрпЖропрпНроХро┐ройрпНро▒рой.</div></div>
            <div class="face back"><div class="title-card">рокро┐ройрпНройрпНрокроХрпНроХроорпН</div><div class="desc">роиро╛ро│рпИроп роХрогрпНроХро│ро┐ро▓рпН роиро╛роорпН роХрпВроЯро┐ропрпЗ роЗро░рпБрокрпНрокрпЛроорпН.</div></div>
          </div>
        </div>

        <div class="flip-card" data-id="5" tabindex="0">
          <div class="flip-inner">
            <div class="face front"><div class="title-card">роЪро┐ро▒рпБ рокро░ро┐роЪрпБ</div><div class="desc">роЙройрпН роХрпИрокрпНрокро┐роЯро┐ропро┐ро▓рпН роиро╛ройро┐ро░рпБроХрпНроХро┐ро▒рпЗройрпН тАФ роОро│ро┐роорпИропро╛ройродрпБ, роЙрогрпНроорпИ.</div></div>
            <div class="face back"><div class="title-card">рокро┐ройрпНройрпНрокроХрпНроХроорпН</div><div class="desc">роЗроирпНроиро┐ро▓рпИропро┐ройрпН роТро│ро┐ роЙройрпНройро╛ро▓рпНродро╛ройрпН.</div></div>
          </div>
        </div>

        <div class="flip-card" data-id="6" tabindex="0">
          <div class="flip-inner">
            <div class="face front"><div class="title-card">роироорпН рокропрогроорпН</div><div class="desc">роиро╛роорпН роЪрпЗро░рпБроорпН роТро╡рпНро╡рпКро░рпБ роиро╛ро│рпБроорпН рокрпБродро┐роп роХро┐ро│ро┐ропро╛ро╡ро╛роХро┐ро▒родрпБ.</div></div>
            <div class="face back"><div class="title-card">рокро┐ройрпНройрпНрокроХрпНроХроорпН</div><div class="desc">роорпБройрпНройрпЗро░рпБроорпН рокро╛родрпИропро┐ро▓рпН роирпА роЗро░рпБроХрпНроХро┐ро▒ро╛ропрпН тАФ роиро╛ройрпН рокро╛родрпБроХро╛роХрпНроХро┐ро▒рпЗройрпН.</div></div>
          </div>
        </div>

      </div>
      <div style="font-size:12px;color:var(--muted);margin-top:10px;">роХро┐ро│ро┐роХрпН роЪрпЖропрпНродрпБ родро┐ро░рпБроХрпНроХро╡рпБроорпН; роирпАроЯрпНроЯро┐ роЗро┤рпБродрпНродрпБ роЗроЯродрпНродрпИ рооро╛ро▒рпНро▒ро╡рпБроорпН; роирпАрогрпНроЯ родрпКроЯрпНроЯро╛ро▓рпН роОроорпЛроЬро┐ рооро┤рпИ ро╡ро░рпБроХро┐ро▒родрпБ.</div>
    </section>

    <section class="card reveal" data-idx="6">
      <p class="section-title">роХро╛родро▓рпН рокрпБродрпНродроХроорпН (рокроХрпНроХроорпН родро┐ро░рпБрокрпНрокрпБ)</p>
      <div class="book" id="book">
        <div class="book-view" id="bookView" aria-live="polite">
          <div class="page" data-page="0" style="z-index:50">
            <h3 style="margin:0 0 8px;">роорпБродро▓рпН роЪроирпНродро┐рокрпНрокрпБ</h3>
            <div style="max-width:90%;color:var(--muted)">роЕроирпНродроиро╛ро│рпН роирпА роЪро┐ро░ро┐родрпНрод рокрпЛродрпБ, роОройрпНройрпИ роорпИропрооро╛ропрпН роОроЯрпБродрпНродро╛ропрпН.</div>
          </div>
          <div class="page hidden" data-page="1" style="z-index:40">
            <h3 style="margin:0 0 8px;">рокро┐ро░рокро▓рооро╛рой роиро┐ройрпИро╡рпБроХро│рпН</h3>
            <div style="max-width:90%;color:var(--muted)">роХро╛рокрпНрокро┐, роорпМройроорпН, роироЯрпИроХро│рпН тАФ роЕройрпИродрпНродрпБроорпН роЗродро┤рпНроХро│рпН рокрпЛро▓рпН.</div>
          </div>
          <div class="page hidden" data-page="2" style="z-index:30">
            <h3 style="margin:0 0 8px;">роОродро┐ро░рпНроХро╛ро▓роорпН</h3>
            <div style="max-width:90%;color:var(--muted)">роХрпИрокро┐роЯро┐родрпНродрпБ роироЯро┐рокрпЛроорпН роОройрпНро▒ ро╡ро╛роХрпНроХрпБро▒рпБродро┐.</div>
          </div>
        </div>

        <div class="book-controls">
          <button class="ctrl" id="prevPage" aria-label="роорпБроирпНродрпИроп рокроХрпНроХроорпН">рокро┐ройрпНройро╛ро▓рпН</button>
          <button class="ctrl" id="nextPage" aria-label="роЕроЯрпБродрпНрод рокроХрпНроХроорпН">роЕроЯрпБродрпНрод</button>
        </div>
      </div>
    </section>

    <section class="card reveal" data-idx="7">
      <p class="section-title">роТро░рпБ роХро╡ро┐родрпИ</p>
      <div class="poem">рооро▒рпИроирпНрод рооро╛ро▓рпИ ро╡рпЖро│ро┐роЪрпНроЪродрпНродро┐ро▓рпН роЙройрпН рокрпЖропро░рпН роорпБройрпНройро┐ро▓рпИропро╛роХя┐╜я┐╜я┐╜ро▒родрпБ, родрпВроп ро╡рпЖропро┐ро▓ро┐ройрпН роЕроЯро┐роХрпНроХроЯро┐ роОройрпН роЕроЮрпНроЪро▓ро┐ропро╛роХрпБроорпН; роирпА роОройрпН роХройро╡ро┐ройрпН роиро┐ро┤ро▓рпН тАФ роиро╛ройрпН роЕродро┐ро▓рпН роЕроорпИроирпНродрпБ роироЯроХрпНроХро┐ро▒рпЗройрпН.</div>
    </section>

    <section class="card reveal" data-idx="8">
      <p class="section-title">роЗро▒рпБродро┐ рокро░ро┐роЪрпБ</p>
      <div class="gift-wrapper">
        <div class="gift" id="finalGift" data-gift-end="1" tabindex="0" aria-label="роЗро▒рпБродро┐ рокро░ро┐роЪрпБ 1">
          <div style="font-size:28px">ЁЯТМ</div>
          <div style="font-size:13px;color:#3a2133;margin-top:8px;">роЕройрпНрокрпБ роХроЯро┐родроорпН</div>
        </div>
      </div>
    </section>

    <footer class="reveal" data-idx="9">
      <div class="heartbeat" aria-hidden="true" title="роЗродропроорпН">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <path d="M12 21s-7-4.2-9-6.6C0.6 10 4.6 5 8 7c1.2.9 1.9 2.2 2.9 2.2 1 0 1.7-1.3 2.9-2.2 3.4-2 7.4 3 5 7.4-2 2.4-9 6.6-9 6.6z" />
        </svg>
      </div>
      <div>роОройрпНро▒рпБроорпН роирпЗроЪроорпБроЯройрпН тАФ роХро╛ро░рпНродрпНродро┐ тЩе роЕроорпНроорпБ</div>
    </footer>
  </main>

  <div id="particle-layer" aria-hidden="false"></div>

  <div class="image-modal" id="imageModal" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="image-card" role="document">
      <button class="close-btn" id="closeImage" aria-label="Close">тЬХ</button>
      <img id="modalImage" alt="Keepsake image" src="image.jpg" onerror="this.style.display='none'; document.getElementById('imagePlaceholder').style.display='block'">
      <div id="imagePlaceholder" style="display:none; padding:36px; background:linear-gradient(180deg,#ffeef6,#fff);">
        <div style="font-size:28px; color:var(--accent-red); margin-bottom:8px;">ЁЯТМ</div>
        <div style="font-family:'Noto Serif Tamil', serif; font-size:18px; color:#341427;">роЕройрпНрокрпБ роХроЯро┐родроорпН тАФ роОройрпН роЗродропродрпНродро┐ро▓ро┐ро░рпБроирпНродрпБ</div>
        <div style="color:var(--muted); margin-top:6px;">(image.jpg роЗро▓рпНро▓рпИ тАФ рокро┐ро▒роХрпБ рооро╛ро▒рпНро▒ро╡рпБроорпН)</div>
      </div>
      <div id="imgCaption" class="caption" style="display:none">роЕроорпНроорпБ тАФ роОрокрпНрокрпЛродрпБроорпН роОройрпН роиро┐ройрпИро╡рпБроХро│ро┐ро▓рпН</div>
    </div>
  </div>

  <script>
    (function(){
      const supportsVibrate = 'vibrate' in navigator;
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

      // parallax blobs
      const blobA = document.getElementById('blobA');
      const blobB = document.getElementById('blobB');
      function onScrollParallax(){ const y = window.scrollY || window.pageYOffset; if(blobA) blobA.style.transform = `translateY(${y * 0.06}px) translateX(${y * -0.02}px) scale(${1 + Math.min(0.06, y/4000)})`; if(blobB) blobB.style.transform = `translateY(${y * -0.04}px) translateX(${y * 0.02}px) scale(${1 + Math.min(0.05, y/6000)})`; }
      window.addEventListener('scroll', onScrollParallax, { passive:true });

      // particles (pool)
      const EMOJIS = ['тЭдя╕П','ЁЯШН','ЁЯТХ','ЁЯТЦ','ЁЯТл','ЁЯе░','ЁЯМ╕','тЬи'];
      const HEART_SVG_WHITE = '<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill="%23ffffff" d="M12 21s-7-4.2-9-6.6C0.6 10 4.6 5 8 7c1.2.9 1.9 2.2 2.9 2.2 1 0 1.7-1.3 2.9-2.2 3.4-2 7.4 3 5 7.4-2 2.4-9 6.6-9 6.6z"/></svg>';
      const COLORS = ['#ff204a','#ff6aa6','#ffd0ea','#ff9fcc'];

      const layer = document.getElementById('particle-layer');
      const pool = [];
      const active = new Set();
      const MAX = 1400;
      for(let i=0;i<48;i++){ const el = document.createElement('div'); el.className='particle'; el.style.pointerEvents='auto'; el.addEventListener('pointerdown', e=> { e.stopPropagation(); popParticle(el); }, {passive:true}); pool.push(el); }

      function obtainParticle(){ if(pool.length) return pool.pop(); if(active.size + pool.length < MAX){ for(let i=0;i<8;i++){ const el = document.createElement('div'); el.className='particle'; el.style.pointerEvents='auto'; el.addEventListener('pointerdown', e=> { e.stopPropagation(); popParticle(el); }, {passive:true}); pool.push(el);} return pool.pop(); } return null; }
      function releaseParticle(el){ if(!el) return; el.style.pointerEvents='none'; el.style.opacity='0'; if(el.parentNode) el.parentNode.removeChild(el); active.delete(el); pool.push(el); }

      function spawnAt(x,y,count=1,opts={}){ opts=opts||{}; for(let i=0;i<count;i++){ if(active.size > MAX) return; const el = obtainParticle(); if(!el) return; const useEmoji = Math.random()>0.28; if(useEmoji){ el.textContent = EMOJIS[Math.floor(Math.random()*EMOJIS.length)]; el.style.fontSize=(12+Math.floor(Math.random()*22))+'px'; } else { el.innerHTML = HEART_SVG_WHITE; const path = el.querySelector('path'); if(path) path.setAttribute('fill', COLORS[Math.floor(Math.random()*COLORS.length)]);} const size=(opts.minSize||18)+Math.round(Math.random()*(opts.maxSize||36)); el.style.width = size+'px'; el.style.height = size+'px'; const dx = (-0.5+Math.random())*(opts.spread||44); const dy = (-0.5+Math.random())*(opts.spread||44); const sx = Math.max(6, Math.min(window.innerWidth-6, x+dx)); const sy = Math.max(6, Math.min(window.innerHeight-6, y+dy)); el.style.left = sx+'px'; el.style.top = sy+'px'; el._vx = (-0.6 + Math.random()*1.2)*(0.6 + Math.random()); el._vy = -1.2 - Math.random()*2.2; el._ax = 0; el._ay = 0.03 + Math.random()*0.06; el._created = performance.now(); el._life = 1200 + Math.random()*2600; el._rot = (-20 + Math.random()*40); el._rotSpeed = (-0.6 + Math.random()*1.2); el._popped = false; el.style.opacity='1'; layer.appendChild(el); active.add(el);} }

      function spawnHeartsAt(x,y,count=1,opts={}){ opts=opts||{}; for(let i=0;i<count;i++){ const el = obtainParticle(); if(!el) return; el.innerHTML = HEART_SVG_WHITE; const path = el.querySelector('path'); if(path) path.setAttribute('fill', COLORS[Math.floor(Math.random()*COLORS.length)]); const size=(opts.minSize||18)+Math.round(Math.random()*(opts.maxSize||46)); el.style.width=size+'px'; el.style.height=size+'px'; const dx = (-0.5+Math.random())*(opts.spread||72); const dy = (-0.5+Math.random())*(opts.spread||72); const sx = Math.max(6, Math.min(window.innerWidth-6, x+dx)); const sy = Math.max(6, Math.min(window.innerHeight-6, y+dy)); el.style.left=sx+'px'; el.style.top=sy+'px'; el._vx = (-0.6 + Math.random()*1.2)*(0.6 + Math.random()); el._vy = -1.0 - Math.random()*1.8; el._ax=0; el._ay=0.02+Math.random()*0.04; el._created = performance.now(); el._life = 1000 + Math.random()*2000; el._rot = (-10 + Math.random()*20); el._rotSpeed = (-0.3 + Math.random()*0.6); el._popped=false; el.style.opacity='1'; layer.appendChild(el); active.add(el);} }

      function popParticle(el){ if(!el || el._popped) return; el._popped = true; el.animate([{ transform: el.style.transform || 'translate(-50%,-50%) scale(1)', opacity:1 }, { transform:'translate(-50%,-50%) scale(1.8)', opacity:0 }], { duration:260, easing:'cubic-bezier(.2,.9,.3,1)'}); try{ if(supportsVibrate) navigator.vibrate(12);}catch(e){} setTimeout(()=> releaseParticle(el), 300); }

      let last = performance.now();
      function tick(now){ const dt = now - last; last = now; const toRemove = []; active.forEach(el=>{ if(el._popped) return; const age = now - el._created; if(age > el._life){ el._popped = true; el.animate([{ opacity:1 }, { opacity:0 }], { duration:260, easing:'linear' }); setTimeout(()=> releaseParticle(el), 300); return; } el._vx += el._ax * (dt * 0.06); el._vy += el._ay * (dt * 0.06); let left = parseFloat(el.style.left); let top = parseFloat(el.style.top); left += el._vx * (dt * 0.06) * 18; top += el._vy * (dt * 0.06) * 18; el._rot = (el._rot + el._rotSpeed * (dt * 0.06) * 6) % 360; el.style.left = left + 'px'; el.style.top = top + 'px'; el.style.transform = `translate(-50%,-50%) rotate(${el._rot}deg)`; if(age > el._life * 0.72) el.style.opacity = String(Math.max(0, 1 - ((age - el._life * 0.72) / (el._life * 0.28)))); if(top > window.innerHeight + 160 || left < -160 || left > window.innerWidth + 160) toRemove.push(el); }); toRemove.forEach(releaseParticle); raf = requestAnimationFrame(tick); }
      let raf = requestAnimationFrame(tick);

      // pointer interactions: click -> heart burst; long-press -> rain
      let longTimer=null, rainInterval=null, rainOrigin=null;
      const rainRate = 140;
      const app = document.getElementById('app');

      function pointerDown(e){
        if(e.button && e.button !== 0) return;
        const x = e.clientX, y = e.clientY;
        spawnHeartsAt(x,y, 14, { spread:160, minSize:18, maxSize:42 });
        longTimer = setTimeout(()=> startRain(x,y), 480);
      }
      function pointerMove(e){ if(rainInterval) rainOrigin = { x: e.clientX, y: e.clientY }; }
      function pointerUp(){ clearTimeout(longTimer); stopRain(); }
      function startRain(x = window.innerWidth/2, y = -20){
        if(rainInterval) return; rainOrigin = { x,y }; rainInterval = setInterval(()=> { const rx = rainOrigin.x + (-36 + Math.random()*72); const ry = rainOrigin.y + (-20 + Math.random()*40); spawnAt(rx, ry, 8 + Math.floor(Math.random()*8), { spread: 84 }); }, rainRate);
      }
      function stopRain(){ if(rainInterval){ clearInterval(rainInterval); rainInterval=null; rainOrigin=null; } }
      app.addEventListener('pointerdown', pointerDown, { passive:true });
      app.addEventListener('pointermove', pointerMove, { passive:true });
      window.addEventListener('pointerup', pointerUp, { passive:true });
      window.addEventListener('pointercancel', pointerUp, { passive:true });

      // upgraded reveal
      const reveals = document.querySelectorAll('.reveal');
      const io = new IntersectionObserver((entries, obs)=>{ entries.forEach(entry=>{ if(entry.isIntersecting){ const el = entry.target; const idx = Math.max(0, parseInt(el.dataset.idx||'0',10)); const delay = Math.min(900, idx * 100); if(prefersReduced) el.classList.add('visible'); else setTimeout(()=> el.classList.add('visible'), delay); obs.unobserve(el); } }); }, { root:null, rootMargin:'0px 0px -10% 0px', threshold:0.12 });
      reveals.forEach(r => io.observe(r));

      // drag & flip (robust pointer capture/release)
      let dragging=null, dragStart=null, dragElClone=null, currentIndex=-1;
      function pointerDownFlip(e){
        const el = e.currentTarget;
        if(e.button && e.button !== 0) return;
        dragging = el; dragStart = { x:e.clientX, y:e.clientY }; currentIndex = Array.from(el.parentNode.children).indexOf(el);
        try{ el.setPointerCapture(e.pointerId); }catch(e){}
        dragElClone = el.cloneNode(true); dragElClone.style.position='fixed'; const r = el.getBoundingClientRect(); dragElClone.style.left = r.left+'px'; dragElClone.style.top = r.top+'px'; dragElClone.style.width = el.offsetWidth+'px'; dragElClone.style.zIndex = 200; dragElClone.classList.add('dragging'); document.body.appendChild(dragElClone);
        el.style.opacity='0.18';
      }
      function pointerMoveFlip(e){ if(!dragging || !dragElClone) return; const dx = e.clientX - dragStart.x; const dy = e.clientY - dragStart.y; dragElClone.style.transform = `translate(${dx}px,${dy}px) rotate(${dx/20}deg)`; }
      function pointerUpFlip(e){
        if(!dragging) return;
        const parent = dragging.parentNode; const children = Array.from(parent.children);
        const cx = e.clientX; let nearestIdx = currentIndex; let minDist = Infinity;
        children.forEach((ch, idx)=>{ const r = ch.getBoundingClientRect(); const center = r.left + r.width/2; const d = Math.abs(center - cx); if(d < minDist){ minDist = d; nearestIdx = idx; } });
        const reference = children[nearestIdx];
        if(reference && reference !== dragging){
          if(nearestIdx > currentIndex) parent.insertBefore(dragging, reference.nextSibling); else parent.insertBefore(dragging, reference);
        }
        if(dragElClone && dragElClone.parentNode) dragElClone.parentNode.removeChild(dragElClone);
        dragging.style.opacity=''; dragging=null; dragElClone=null; dragStart=null; currentIndex=-1;
        try{ if(e.pointerId) { e.currentTarget && e.currentTarget.releasePointerCapture && e.currentTarget.releasePointerCapture(e.pointerId); } }catch(e){}
      }

      document.querySelectorAll('.flip-card').forEach(fc=>{
        fc.addEventListener('click', (e)=>{ if(dragElClone) return; fc.classList.toggle('flipped'); }, {passive:true});
        fc.addEventListener('keydown', e=>{ if(e.key==='Enter' || e.key===' '){ e.preventDefault(); fc.classList.toggle('flipped'); } });
        fc.addEventListener('pointerdown', pointerDownFlip);
        fc.addEventListener('pointermove', pointerMoveFlip);
        fc.addEventListener('pointerup', pointerUpFlip);
        fc.addEventListener('pointercancel', pointerUpFlip);
      });

      // MEMORY BOOK: updated showPage to preserve scale for page 0
      const pages = Array.from(document.querySelectorAll('.page'));
      let currentPage = 0;
      function showPage(idx){
        pages.forEach((p,i)=> {
          const isFirst = p.dataset.page === '0';
          const scale = isFirst ? 0.92 : 1;
          if(i === idx){
            p.classList.remove('hidden');
            p.style.zIndex = 50 - i;
            p.style.transform = `rotateY(0deg) scale(${scale})`;
            p.style.opacity = '1';
          } else if(i < idx){
            p.classList.add('hidden');
            p.style.zIndex = 30 - i;
            p.style.transform = `rotateY(-180deg) scale(${scale})`;
            p.style.opacity = '0';
          } else {
            p.classList.add('hidden');
            p.style.zIndex = 20 - i;
            p.style.transform = `rotateY(0deg) scale(${scale})`;
            p.style.opacity = '0';
          }
        });
      }
      showPage(0);
      document.getElementById('nextPage').addEventListener('click', ()=>{
        if(currentPage < pages.length - 1){
          pages[currentPage].classList.add('turning');
          setTimeout(()=> { pages[currentPage].classList.add('hidden'); pages[currentPage].classList.remove('turning'); currentPage++; showPage(currentPage); }, 420);
        }
      });
      document.getElementById('prevPage').addEventListener('click', ()=>{ if(currentPage > 0){ currentPage--; showPage(currentPage); pages[currentPage].classList.remove('hidden'); } });

      (function(){
        const view = document.getElementById('bookView'); let sx=0, swiping=false;
        view.addEventListener('pointerdown', (e)=>{ sx = e.clientX; swiping = true; });
        view.addEventListener('pointerup', (e)=>{ if(!swiping) return; const dx = e.clientX - sx; if(dx < -48) document.getElementById('nextPage').click(); else if(dx > 48) document.getElementById('prevPage').click(); swiping=false; });
        view.addEventListener('pointercancel', ()=> swiping=false);
      })();

      // image modal
      const finalGift = document.getElementById('finalGift');
      const imageModal = document.getElementById('imageModal');
      const closeImage = document.getElementById('closeImage');
      const modalImage = document.getElementById('modalImage');
      const imagePlaceholder = document.getElementById('imagePlaceholder');
      const imgCaption = document.getElementById('imgCaption');

      function openImageModal(){
        imageModal.classList.add('open'); imageModal.setAttribute('aria-hidden','false');
        const rect = finalGift.getBoundingClientRect();
        spawnHeartsAt(rect.left + rect.width/2, rect.top + rect.height/2, 48, { spread:260 });
        confetti(rect.left + rect.width/2, rect.top + rect.height/2, 80);
        setTimeout(()=> { if(modalImage && modalImage.complete && modalImage.naturalWidth !== 0) imgCaption.style.display = 'block'; else imagePlaceholder.style.display = 'block'; }, 150);
        const focusable = imageModal.querySelectorAll('button, [href], input, textarea, select, [tabindex]:not([tabindex="-1"])');
        if(focusable.length) focusable[0].focus();
      }
      function closeImageModal(){ imageModal.classList.remove('open'); imageModal.setAttribute('aria-hidden','true'); imagePlaceholder.style.display = 'none'; imgCaption.style.display = 'none'; }
      finalGift && finalGift.addEventListener('click', openImageModal, {passive:true});
      closeImage && closeImage.addEventListener('click', closeImageModal);
      imageModal.addEventListener('click', (e)=> { if(e.target === imageModal) closeImageModal(); });
      document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeImageModal(); });

      function confetti(cx,cy,count=50){
        for(let i=0;i<count;i++){
          const n = document.createElement('div');
          n.style.position='fixed'; n.style.left = (cx + (-120 + Math.random()*240)) + 'px';
          n.style.top = (cy + (-40 + Math.random()*40)) + 'px';
          const w = 6 + Math.random()*8, h = 6 + Math.random()*12;
          n.style.width = w + 'px'; n.style.height = h + 'px';
          n.style.background = COLORS[Math.floor(Math.random()*COLORS.length)];
          n.style.borderRadius = (Math.random()*6)+'px';
          n.style.zIndex = 320; n.style.pointerEvents = 'none'; n.style.opacity = '0.98';
          document.body.appendChild(n);
          const dx = (-120 + Math.random()*240), dy = (120 + Math.random()*160 + Math.random()*120), rot = (Math.random()*360), dur = 700 + Math.random()*900;
          n.animate([{ transform:'translate(0,0) rotate(0deg)', opacity:1 }, { transform:`translate(${dx}px,${dy}px) rotate(${rot}deg)`, opacity:0 }], { duration: dur, easing:'cubic-bezier(.2,.8,.25,1)' });
          setTimeout(()=> n.remove(), dur+80);
        }
      }

      // footer bursts
      document.querySelectorAll('[data-gift-end]').forEach(g=>{ g.addEventListener('click', (e)=>{ const rect = g.getBoundingClientRect(); spawnHeartsAt(rect.left + rect.width/2, rect.top + rect.height/2, 24, { spread:180 }); confetti(rect.left + rect.width/2, rect.top + rect.height/2, 36); }, {passive:true}); });

      if(prefersReduced) document.querySelectorAll('.reveal').forEach(el=> el.classList.add('visible'));
      window.addEventListener('load', ()=>{ const first = document.querySelector('.reveal'); if(first) first.classList.add('visible'); spawnHeartsAt(window.innerWidth/2, 110, 18, { spread: 260 }); });
      setInterval(()=>{ if(active.size > 900){ const arr = Array.from(active).slice(0, Math.floor(active.size/3)); arr.forEach(el => { el._popped = true; if(el.parentNode) el.parentNode.removeChild(el); active.delete(el); }); } }, 2400);

    })();
  </script>
</body>
</html>